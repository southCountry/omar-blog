### J2EE架构
![J2EE典型架构](https://github.com/southCountry/omar-blog/raw/master/images/mysql/j2ee-arc.png)

### SSH架构
![SSH典型架构](https://github.com/southCountry/omar-blog/raw/master/images/mysql/ssh-arc.png)

### SOA服务化架构
- 在单体应用无法满足海量用户高并发的场景，水平扩展能力有限。
- SOA将应用的模块化组件通过定义明确的接口和契约联系起来，接口是采用中立的方式进行定义，独立于某种语言，硬件和操作系统，通常是通过网络通信完成，但是并不局限于单一网络协议，可以使tcp或者是http，也可以是消息队列，甚至可以是某种数据库存储形式

#### web service
web service是SOA服务化的一种实现，它使得运行在不同机器以及操作系统的服务互相发现和调用成为可能，并且可以通过某种协议交换数据
![web-service](https://github.com/southCountry/omar-blog/raw/master/images/mysql/web-service.png)

#### ESB企业服务总线
更加侧重于系统之间的集成，历史系统本身的复杂性并没有降低

### 微服务架构
![微服务架构](https://github.com/southCountry/omar-blog/raw/master/images/mysql/micro-service.png)

- 微服务把每一个职责单一的功能放在一个独立的服务中
- 每个服务运行在一个单独的进程中
- 每个服务有多个实例在运行，实例可以运行在容器化平台内，达到平滑伸缩的效果
- 每个服务有自己的数据存储，实际上，每个服务应该有自己独享的数据库、缓存、消息队列等资源
- 每个服务应该有自己的运营平台，以及独享的运营人员，包括技术运维和业务运营人员；每个服务都高度自治，内部的变化对外透明

![微服务时代团队沟通方式](https://github.com/southCountry/omar-blog/raw/master/images/mysql/micro-service-communicate.png)

#### 微服务的容错模式
1. 微服务容器分组：不同流量（普通用户流量，VIP用户流量）导入不同的应用分组中
![微服务容器分组](https://github.com/southCountry/omar-blog/raw/master/images/mysql/container-group.png)

2. 线程池隔离
![微服务线程池隔离](https://github.com/southCountry/omar-blog/raw/master/images/mysql/thread-executor-isolation.png)

3. 熔断
![微服务熔断](https://github.com/southCountry/omar-blog/raw/master/images/mysql/break-through.png)

4. 限流
![微服务限流](https://github.com/southCountry/omar-blog/raw/master/images/mysql/ling-pai-tong.png)

#### 微服务拆分粒度
适可而止，原则是拆分到可以让使用方自由地编排底层的子服务，同时要考虑团队的建设。

#### 微服务项目层级结构
![微服务项目层级结构](https://github.com/southCountry/omar-blog/raw/master/images/mysql/project-layer.png)

#### java平台下实现层架构
![java平台下实现层架构](https://github.com/southCountry/omar-blog/raw/master/images/mysql/project-layer1.png)

**永远不要在本地事务中调用远程服务，这种场景下如果远程服务出现问题，会拖长事务，导致应用服务器占用太多数据库连接**



