### DDD不是什么
1. 不是一个仪式性的过程
2. 不应该成为项目进度的阻碍，目的是简化，而不是复杂化

### 领域模型定义
领域模型是关于某个特定业务的软件模型。通常，领域模型通过对象模型来实现，这些对象同时包含数据和行为，并且表达了准确的业务含义。

### DDD的好处
1. 使领域专家和开发者一起工作，使得开发出来的软件能准确传达业务含义
2. 可以帮助业务人员自我提高
3. 集中知识（业务，项目）
4. DDD同时提供了战略设计和战术设计两种方式。战略设计帮助我们理解哪些是值得投入的，战术设计帮助我们创建DDD模型中各个部件。

### DDD的挑战
1. 为创建通用语言腾出时间和精力
2. 持续地将领域专家引入项目
3. 改变开发者对领域的思考方式

这些挑战反过来，会让一个团队在领域内能够更加专业，使得软件能够更加健壮。

### 贫血对象
ORM框架的使用使我们项目中充斥着大量贫血对象。

项目中包含大量边界不清晰的通用方法。
- 业务意图不明确
- 方法本身增加了潜在的复杂性
- 使得领域对象根本不是对象，知识一个数据持有器

## 如何DDD
通用语言和限界上下文同时构成了DDD的两大支柱，并且它们是相辅相成的。

### 通用语言
通用语言是团队共享的语言。领域专家和开发者使用相同的通用语言进行交流。

![注射流感疫苗模型](https://github.com/southCountry/omar-blog/raw/master/images/ddd/example-vaccine.png)

#### 如何掌握通用语言
1. 同时绘制物理模型图和概念模型图，并标以名字和行为
2. 创建一个包含简单定义的术语表

#### 注意
1. 通用语言在团队范围内使用，并且只表达一个单一的领域模型
2. 限界上下文和通用语言存在一对一的关系
3. 限界上下文通常比我们期初想的要小
4. 使用上下文映射图来和其他限界上下文打交道

## 领域和限界上下文
### 限界上下文
限界上下文是一个显式边界，领域模型便存在于边界之内。在边界内，通用语言中的所有术语都有特定的含义，而模型需要准确地反映通用语言。

![账户的不同含义](https://github.com/southCountry/omar-blog/raw/master/images/ddd/example-account.png)

下图是一个含有子域和限界上下文的领域
![一个含有子域和限界上下文的领域](https://github.com/southCountry/omar-blog/raw/master/images/ddd/domian-context.png)

我们需要将关注点放在核心域上。

领域中同时包含问题空间和解决方案空间

### 问题空间
1. 问题空间是领域的一部分，对问题空间的开发将产生一个新的核心域
2. 对问题空间的评估应该同时考虑已有子域和额外所需子域
3. 子域允许我们快速地浏览领域中的各个方面，有助于解决特定的问题

### 解决方案空间
解决方案空间包含一个或多个限界上下文，即一组特定的软件模型。这是因为限界上下文是一个特定的解决方案，它通过软件的方式来实现解决方案。

### 上下文映射图
关系映射缩写
- ACL表示防腐层
- OHS表示开放主机服务
- PL表示发布语言

![上下文映射图](https://github.com/southCountry/omar-blog/raw/master/images/ddd/context-mapping.png)
![上下文映射图](https://github.com/southCountry/omar-blog/raw/master/images/ddd/example-context.png)
![上下文映射图](https://github.com/southCountry/omar-blog/raw/master/images/ddd/example-context-code.png)

## 架构
### 分层
分层架构是所有架构的始祖。
![传统分层架构](https://github.com/southCountry/omar-blog/raw/master/images/ddd/ddd-layer.png)

### 依赖倒置
![依赖倒置的一种方式](https://github.com/southCountry/omar-blog/raw/master/images/ddd/dependency-revert.png)

### 六边形架构
六边形架构也称为端口与适配器架构。对于每种外界类型，都有一个适配器与之相对应。外界通过应用层API与内部进行交互。
![六边形架构](https://github.com/southCountry/omar-blog/raw/master/images/ddd/six-edge-arc.png)

### 面向服务架构SOA
不同的人对SOA的理解是不同的，这里给出一些SOA的原则
![SOA架构](https://github.com/southCountry/omar-blog/raw/master/images/ddd/soa-principle.png)

### CQRS
在CQRS中，来自客户端的命令通过单独的路径抵达命令模型，而查询操作则采用不同的数据源，这样的好处在于可以优化对查询数据的获取，比如用于展现用于接口或报告的数据。
![CQRS](https://github.com/southCountry/omar-blog/raw/master/images/ddd/CQRS.png)

### 事件驱动架构
在一个事件驱动架构中融入了六边形架构。该事件驱动架构通过消息机制完成对所有系统的解耦。
![事件驱动架构](https://github.com/southCountry/omar-blog/raw/master/images/ddd/event-driven-arc.png)

从高层次看事件源，由聚合发布的事件被保存到事件存储中，同时这些事件被用于跟踪模型的状态变化。资源库从时间存储中读取事件，并将这些事件应用于对聚合状态的重建。

后续可以通过快照方式降低事件读取数据量。

## 实体
### 唯一标识
- 用户提供唯一标识
- 应用程序提供唯一标识
- 持久化机制生成唯一标识

### 挖掘实体的关键行为
![tenant实体](https://githhub.com/southCountry/omar-blog/raw/master/images/ddd/tenant-entity.png)

### 实体属性需要被验证合法

### 跟踪变化
跟踪变化最实用的方法是领域事件和事件存储。

## 值对象
- 值类型用于度量和描述事物，我们可以非常容易地对值对象进行创建、测试、使用、优化和维护。
- 可以作为不变量
- 将不同的相关的属性组合成一个概念整体
- 当度量和描述改变时，可以用另一个值对象予以替换
- 可以和其他值对象进行相等性比较

![值对象collaborator的类层级。只有少数几个属性来自上游上下文，因为此时的类名已经能够表示出角色的概念了](https://githhub.com/southCountry/omar-blog/raw/master/images/ddd/value-object.png)

## 领域服务
可以使用领域服务来
1. 执行一个显著的业务操作过程
2. 让领域对象进行转换
3. 以多个领域对象作为输入进行计算，结果产生一个值对象

## 领域事件
![觉和创建并发布事件。订阅方可以先存储事件，然后再将其转发到远程的订阅方中；或者不经存储直接转发。除非消息中间件共享了模型的数据存储，不然即时转发乣XA（两阶段提交）](https://githhub.com/southCountry/omar-blog/raw/master/images/ddd/domain-event.png)

## 模块

## 聚合








